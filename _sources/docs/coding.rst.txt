======================================
SpWMLをコードから操作する
======================================

基本操作
===============

以下のサンプルを確認いただくと分かりやすいです。
https://pub.dev/packages/simple_widget_markup/example

上記サンプル中のSpWMLのパラメータには、「id」というものがあります。
例えば「id:1」と記載しているブロックは、Dartコードから

.. code-block:: none
   
   BtnElement btnElement = builder.getElementByID(1) as BtnElement;

のように取得することができます。
どのような型があり、それぞれどんなパラメータを持っているかについては :ref:`「クラスと機能」<classes_and_methods>` を参照してください。
「BtnElement」の部分は何を取得するのかで変わります。これも各型の詳細ページに記載があります。
基本的には一部の省略系の表記を除いて「SpWMLの型名+Element」という名前のクラスになっています。

また、各クラスはFlutterの同様なクラスとほぼ同じパラメータを持っており、以下のようにクラスパラメータを書き換えることで、
コードからほぼ全てをコントロール出来るようになっています。

.. code-block:: none
   
   BtnElement btnElement = builder.getElementByID(1) as BtnElement;
   runBtn.elParams.p.normalBtnParams?.style = const ButtonStyle();
   runBtn.textParams.p.isSelectable = true;

----

Flutterウィジェットとの連携
============================

構造体の :ref:`block<block>` を使うと、以下のように内部にウィジェットを埋め込むことが出来ます。
これを利用すると、デザイナーがデザインツールで作成した画面パーツをFlutter Widgetに変換すれば、それを簡単に埋め込めます。

.. code-block:: none

   SpWMLBuilder b = SpWMLBuilder(layout);
   b.replaceID(ここには子要素を置き換えたいblockのIDを記載します。, Widgetをここに入れます);
   Widget compiledWidget = b.build(context);

既存のコードを再利用したり、静的な言語で書くのが難しい特殊な画面パーツを埋め込む場合はこのようにしてください。